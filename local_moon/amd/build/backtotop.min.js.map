{"version":3,"file":"backtotop.min.js","sources":["../src/backtotop.js"],"sourcesContent":["// javascript\ndefine([], function() {\n    let initialized = false;\n    let _cleanup = null;\n\n    return {\n        /**\n         * Initialize the back to top button\n         * @param {number} enable 0 to disable, 1 to enable\n         */\n        init: function(enable = 0) {\n            if (!enable || initialized) {\n                return;\n            }\n            initialized = true;\n\n            /**\n             * Set up the back to top button\n             */\n            function setup() {\n                const btn = document.getElementById('moon-backtotop');\n                if (!btn) {\n                    return;\n                }\n\n                const fadeDuration = 200; // ms\n                btn.style.transition = `opacity ${fadeDuration}ms`;\n                btn.style.opacity = '0';\n                btn.style.display = 'none';\n                btn.style.pointerEvents = 'none';\n\n                /**\n                 * Show the button\n                 */\n                function show() {\n                    if (btn.style.display !== 'block') {\n                        btn.style.display = 'block';\n                        // force reflow so transition always runs\n                        // eslint-disable-next-line @babel/no-unused-expressions\n                        btn.offsetHeight;\n                    }\n                    btn.style.opacity = '1';\n                    btn.style.pointerEvents = 'auto';\n                }\n\n                /**\n                 * Hide the button\n                 */\n                function hide() {\n                    btn.style.opacity = '0';\n                    btn.style.pointerEvents = 'none';\n                    setTimeout(() => {\n                        if (btn.style.opacity === '0') {\n                            btn.style.display = 'none';\n                        }\n                    }, fadeDuration);\n                }\n\n                let ticking = false;\n\n                /**\n                 * Handle scroll events\n                 */\n                function onScroll() {\n                    if (ticking) {\n                        return;\n                    }\n                    ticking = true;\n                    requestAnimationFrame(() => {\n                        if (window.scrollY >= 200) {\n                            show();\n                        } else {\n                            hide();\n                        }\n                        ticking = false;\n                    });\n                }\n\n                /**\n                 * Handle button click\n                 * @param {Event} e The click event\n                 */\n                function onClick(e) {\n                    e.preventDefault();\n                    window.scrollTo({ top: 0, behavior: 'smooth' });\n                }\n\n                window.addEventListener('scroll', onScroll, { passive: true });\n                btn.addEventListener('click', onClick);\n\n                // initialize based on current scroll position\n                onScroll();\n\n                _cleanup = function() {\n                    window.removeEventListener('scroll', onScroll);\n                    btn.removeEventListener('click', onClick);\n                    _cleanup = null;\n                    initialized = false;\n                };\n            }\n\n            if (document.readyState === 'loading') {\n                document.addEventListener('DOMContentLoaded', setup, { once: true });\n            } else {\n                setup();\n            }\n        },\n\n        /**\n         * Remove listeners and reset initialization state\n         */\n        destroy: function() {\n            if (typeof _cleanup === 'function') {\n                _cleanup();\n            }\n        }\n    };\n});\n"],"names":["define","initialized","_cleanup","init","enable","setup","btn","document","getElementById","style","transition","opacity","display","pointerEvents","ticking","onScroll","requestAnimationFrame","window","scrollY","offsetHeight","setTimeout","onClick","e","preventDefault","scrollTo","top","behavior","addEventListener","passive","removeEventListener","readyState","once","destroy"],"mappings":"AACAA,8BAAO,IAAI,eACHC,aAAc,EACdC,SAAW,WAER,CAKHC,KAAM,eAASC,8DAAS,WASXC,cACCC,IAAMC,SAASC,eAAe,sBAC/BF,WAKLA,IAAIG,MAAMC,WAAc,gBACxBJ,IAAIG,MAAME,QAAU,IACpBL,IAAIG,MAAMG,QAAU,OACpBN,IAAIG,MAAMI,cAAgB,WA6BtBC,SAAU,WAKLC,WACDD,UAGJA,SAAU,EACVE,uBAAsB,KACdC,OAAOC,SAAW,KAlCA,UAAtBZ,IAAIG,MAAMG,UACVN,IAAIG,MAAMG,QAAU,QAGpBN,IAAIa,cAERb,IAAIG,MAAME,QAAU,IACpBL,IAAIG,MAAMI,cAAgB,SAO1BP,IAAIG,MAAME,QAAU,IACpBL,IAAIG,MAAMI,cAAgB,OAC1BO,YAAW,KACmB,MAAtBd,IAAIG,MAAME,UACVL,IAAIG,MAAMG,QAAU,UA5BX,MAiDbE,SAAU,eAQTO,QAAQC,GACbA,EAAEC,iBACFN,OAAOO,SAAS,CAAEC,IAAK,EAAGC,SAAU,WAGxCT,OAAOU,iBAAiB,SAAUZ,SAAU,CAAEa,SAAS,IACvDtB,IAAIqB,iBAAiB,QAASN,SAG9BN,WAEAb,SAAW,WACPe,OAAOY,oBAAoB,SAAUd,UACrCT,IAAIuB,oBAAoB,QAASR,SACjCnB,SAAW,KACXD,aAAc,GAtFjBG,SAAUH,cAGfA,aAAc,EAuFc,YAAxBM,SAASuB,WACTvB,SAASoB,iBAAiB,mBAAoBtB,MAAO,CAAE0B,MAAM,IAE7D1B,UAOR2B,QAAS,WACmB,mBAAb9B,UACPA"}