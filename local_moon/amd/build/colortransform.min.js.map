{"version":3,"file":"colortransform.min.js","sources":["../src/colortransform.js"],"sourcesContent":["// local/moon/amd/src/colortransform.js\ndefine([], function() {\n    /**\n     * Color transform function\n     * @param {string} from The from color mode\n     * @param {string} to The to color mode\n     * @param {number} offset The scroll offset percentage\n     * @returns {void}\n     */\n    function colorTransform(from, to, offset) {\n        const offsetFactor = Math.max(0, Math.min(100, Number(offset || 100))) / 100;\n        const reached = (window.innerHeight + window.scrollY) >= (document.body.scrollHeight * offsetFactor);\n        const html = document.documentElement;\n        const theme = html.getAttribute('data-bs-theme');\n\n        if (reached) {\n            if (theme === from) {\n                html.setAttribute('data-bs-theme', to);\n            }\n        } else {\n            if (theme === to) {\n                html.setAttribute('data-bs-theme', from);\n            }\n        }\n    }\n    return {\n        /**\n         * Initialize the color mode switcher\n         * @param {string} from The from color mode\n         * @param {string} to The to color mode\n         * @param {number} offset The scroll offset percentage\n         * @returns {void}\n         */\n        init: function(from, to, offset) {\n            const normalizedOffset = Math.max(0, Math.min(100, Number(offset || 100)));\n\n            /**\n             * Ensure the body has the transition class\n             * @returns {void}\n             */\n            function ensureBodyClass() {\n                if (document.body) {\n                    document.body.classList.add('as-transition-body');\n                }\n            }\n\n            if (document.readyState === 'loading') {\n                document.addEventListener('DOMContentLoaded', function() {\n                    ensureBodyClass();\n                    colorTransform(from, to, normalizedOffset);\n                });\n            } else {\n                ensureBodyClass();\n                colorTransform(from, to, normalizedOffset);\n            }\n\n            // Attach a single passive scroll listener and also listen to resize\n            const handler = () => colorTransform(from, to, normalizedOffset);\n            window.addEventListener('scroll', handler, { passive: true });\n            window.addEventListener('resize', handler, { passive: true });\n        }\n    };\n});"],"names":["define","colorTransform","from","to","offset","offsetFactor","Math","max","min","Number","reached","window","innerHeight","scrollY","document","body","scrollHeight","html","documentElement","theme","getAttribute","setAttribute","init","normalizedOffset","ensureBodyClass","classList","add","readyState","addEventListener","handler","passive"],"mappings":"AACAA,mCAAO,IAAI,oBAQEC,eAAeC,KAAMC,GAAIC,cACxBC,aAAeC,KAAKC,IAAI,EAAGD,KAAKE,IAAI,IAAKC,OAAOL,QAAU,OAAS,IACnEM,QAAWC,OAAOC,YAAcD,OAAOE,SAAaC,SAASC,KAAKC,aAAeX,aACjFY,KAAOH,SAASI,gBAChBC,MAAQF,KAAKG,aAAa,iBAE5BV,QACIS,QAAUjB,MACVe,KAAKI,aAAa,gBAAiBlB,IAGnCgB,QAAUhB,IACVc,KAAKI,aAAa,gBAAiBnB,YAIxC,CAQHoB,KAAM,SAASpB,KAAMC,GAAIC,cACfmB,iBAAmBjB,KAAKC,IAAI,EAAGD,KAAKE,IAAI,IAAKC,OAAOL,QAAU,gBAM3DoB,kBACDV,SAASC,MACTD,SAASC,KAAKU,UAAUC,IAAI,sBAIR,YAAxBZ,SAASa,WACTb,SAASc,iBAAiB,oBAAoB,WAC1CJ,kBACAvB,eAAeC,KAAMC,GAAIoB,sBAG7BC,kBACAvB,eAAeC,KAAMC,GAAIoB,yBAIvBM,QAAU,IAAM5B,eAAeC,KAAMC,GAAIoB,kBAC/CZ,OAAOiB,iBAAiB,SAAUC,QAAS,CAAEC,SAAS,IACtDnB,OAAOiB,iBAAiB,SAAUC,QAAS,CAAEC,SAAS"}